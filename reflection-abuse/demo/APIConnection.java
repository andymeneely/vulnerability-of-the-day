/**
 * This is an example class with a secret stored in its private field.
 * @author Andy Meneely
 * 
 */
public class APIConnection {

	// assume this isn't hardcoded, but obtained securely
	private String token = "that token was a secret!";

	public APIConnection() {}

	/**
	 * A public method that requires authentication first, 
	 * but from an untrusted API in the same virtual machine.
	 * @param tokenGuess
	 */
	public void doSomething(String tokenGuess) {
		if (token.equals(tokenGuess)) {
			doSomethingSecret();
		}
	}

	/**
	 * This method is supposed to be protected, 
	 * but using reflection, it can be directly invoked.
	 */
	private void doSomethingSecret() {
		System.out.println("You are authenticated! Now let's do some sensitive stuff.");
	}
}
